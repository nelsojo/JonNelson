<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows Exploitation - Stack Overflow</title>
    <link rel="stylesheet" href="style.css">
</head>
<nav>
    <a href="index.html">Home</a>
    <a href="about.html">About Me</a>
    <a href="projects.html">Projects</a>
    <a href="experience.html">Experience</a>
    <a href="https://nelsojo.github.io/BeeRingUI/" target="_blank">Bee Ring Project</a>
</nav>
<header>
    <h1>Windows Exploitation - Stack Overflow</h1>
</header>
<body>
    <div class="container">
        <h2>Overview</h2>
        <p>This lab introduced the concepts of Windows exploitation, specifically focusing on a stack overflow vulnerability in an older version of RealPlayer on Windows XP. The task was to exploit the vulnerability to gain control over the program's execution flow.</p>

        <h2>Methodology</h2>
        <p>To gain control of the environment, I installed a Windows XP VM using VMware Workstation, then configured the system for exploitation. Here are the detailed steps I followed:</p>
        <ul>
            <li>Installed and configured the Windows XP VM in VMware Workstation using the provided Box files.</li>
            <li>Used Immunity Debugger with the Mona plugin for debugging and analysis.</li>
            <li>Wrote a Python script to generate the exploit, manipulating the stack buffer to execute arbitrary code.</li>
            <li>Used Immunity Debugger to identify memory locations and control flow.</li>
            <li>Successfully executed a buffer overflow attack, launching calc.exe as the payload.</li>
        </ul>

        <h2>Challenges Encountered</h2>
        <p>Throughout the process, I encountered several challenges:</p>
        <ul>
            <li>Initial unfamiliarity with Immunity Debugger and Mona plugin; required studying tutorials to learn basic usage.</li>
            <li>Finding the correct buffer overflow threshold (magic number), which was 26073 characters, was critical for the exploit to work.</li>
            <li>Ensuring the program's control flow could be redirected by manipulating the Instruction Pointer (EIP) via buffer overflow.</li>
            <li>Bypassing security mechanisms like ASLR and DEP by using Mona to filter out vulnerable modules.</li>
        </ul>

        <h2>Exploitation Process</h2>
        <p>The goal was to overflow the buffer in such a way that it controlled the EIP and redirected execution to shellcode. Here are the steps that led to the successful exploit:</p>
        <ul>
            <li>Started by feeding the program a series of 'A's to find the point where the buffer would overflow (26073 characters).</li>
            <div class="carousel">
                <div class="carousel-images">
                    <img src="img/ex1-1.png">
                    <img src="img/ex1-2.png">
                    <img src="img/ex1-3.png">
                    <img src="img/ex1-4.png">
                    <img src="img/ex1-5.png">
                    <img src="img/ex1-6.png">
                    <img src="img/ex1-7.png">
                    <img src="img/ex1-8.png">
                   
                </div>
                <button class="prev">Previous</button>
                <button class="next">Next</button>
            </div>
            <li>Identified the address where the EIP could be overwritten, then used Mona to search for valid jump-to-ESP instructions.</li>
            <div class="carousel">
                <div class="carousel-images">
                    <img src="img/ex2-1.png">
                    <img src="img/ex2-2.png">
                    <img src="img/ex2-3.png">
                    <img src="img/ex2-4.png">
                    <img src="img/ex2-5.png">
                    <img src="img/ex2-6.png">
                    <img src="img/ex2-7.png">
                    <img src="img/ex2-8.png">
                   
                </div>
                <button class="prev">Previous</button>
                <button class="next">Next</button>
            </div>
            <li>Used a jump instruction to redirect the flow of execution to our shellcode, which executed calc.exe.</li>
            <img src="img/ex3.png" class = "single-image">
            <li>Experimented with various DLLs and modules, ensuring compatibility with ASLR and DEP settings to maintain stability of the exploit.</li>
            <div class="carousel">
                <div class="carousel-images">
                    <img src="img/ex4-1.png">
                    <img src="img/ex4-2.png">
                    
                   
                </div>
                <button class="prev">Previous</button>
                <button class="next">Next</button>
            </div>
        </ul>

        <h2>Lessons Learned</h2>
        <p>Through this lab, I learned how to:</p>
        <ul>
            <li>Identify vulnerabilities such as buffer overflows and determine the precise point at which they occur.</li>
            <li>Use debugging tools like Immunity Debugger and Mona to analyze and manipulate the stack during program execution.</li>
            <li>Bypass security mechanisms such as ASLR and DEP, which are designed to protect against these kinds of exploits.</li>
            <li>Understand the importance of using different tools for reverse engineering and exploit development, even if they are unfamiliar.</li>
        </ul>

        <h2>System Improvements</h2>
        <p>Based on the findings from this lab, the following security recommendations were suggested:</p>
        <ul>
            <li>Implement stack canaries to detect and prevent buffer overflow attempts.</li>
            <li>Enable Data Execution Prevention (DEP) and Address Space Layout Randomization (ASLR) to protect against arbitrary code execution.</li>
            <li>Use modern operating systems with enhanced security features and regularly update software to mitigate known vulnerabilities.</li>
        </ul>

        <h2>Conclusion</h2>
        <p>This lab provided hands-on experience in performing advanced buffer overflow exploits, which highlighted critical areas in system security and how to leverage debugging tools to identify and manipulate vulnerabilities. It reinforced my understanding of memory vulnerabilities and security measures necessary for defending against such attacks.</p>
    </div>
    <button id="dark-mode-toggle">ðŸŒ™ Dark Mode</button>
    <script src = "dark-mode.js"></script>
    <script src="carousel.js"></script>
</body>
</html>
